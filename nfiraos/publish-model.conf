subsystem               = TCS
component               = cmNFIRAOS

publish {

  events          = [
    {
      name              = atmDispersion 
      description       = """NFIRAOS NGS dispersion information. This stream will adjust the NGS ADC in front of the PWFS.

*Discussion: While SLEWING this dispersion information will be based on the telescope's target position. While INPOSITION or TRACKING (including a dither) this dispersion information will be based on the telescope's current position""" 
      minRate           = 1
      maxRate           = 1
      archive           = true
      attributes        = [
        {
          name          = referenceWavelength
          description   = "The reference wavelength is the wavelength at which the computed dispersion is reported by the TCS as 0."
          type          = double
          minimum       = 0.5
          maximum       = 3.0
          units         = microns
        }
        {
          name          = orientation
          description   = """Orientation of the axis of dispersion to atmospheric refraction defined in the XY plane of the FCRS<sub>174.5</sub>"""
          type          = double
          minimum       = -180
          maximum       = 180
          units         = degrees
        }
        {
          name          = numElem
          description   = "Number of entries (each) in the wavelengths, weights and dispersion elements."
          type          = integer
          minimum       = 1
          maximum       = 30
        }
        {
          name          = wavelength
          description   = "An array of wavelengths"
          type          = array
          minItems      = 1
          maxItems      = 30
          minimum       = 0.5
          maximum       = 3.0
          units         = microns
          items         = {
            type        = double
          }
        }
        {
          name          = weight
          description   = "An array of weights. They must sum to 1.0."
          type          = array
          minItems      = 1
          maxItems      = 30
          minimum       = 0.0
          maximum       = 1.0
          items         = {
            type        = double
          }
        }
        {
          name          = dispersion
          description   = "An array of atmospheric dispersion values"
          type          = array
          minItems      = 1
          maxItems      = 30
          units         = arcsec on sky
          items         = {
            type        = double
          }
        }
        {
          name          = pointingstate
          description   = """Current state of the event stream

*Discussion: SLEWING and TRACKING are the two normal values expected during science observations. INPOSITION is a state only expected during the day when the telescope points at a fixed Az, El.*
          """
          enum          = [SLEWING,TRACKING,INPOSITION]
        }      
        {
          name          = trackID
          description   = "Unique TCS target ID that is incremented (with rollover) each time the TCS is instructed to move to a new target."
          type          = long
        }
        {
          name          = timestamp
          description   = "Timestamp for the data"
          type          = double
          units         = MJD
        }
      ]
    }

    {
      name              = ngsPos
      description       = """NFIRAOS visible NGS image position demand. This stream will adjust the SSM to position the image on the PWFS


*Discussion: While SLEWING this position demand will be based on the telescope's target position. While INPOSITION or TRACKING (including a dither) this position demand will be based on the telescope's current position""" 
      minRate           = 20
      maxRate           = 20
      archive           = true
      attributes        = [
        {
          name          = x
          description   = "NFIRAOS visible NGS target X position"
          type          = double
          units         = "mm in XY plane of FCRS<sub>174.5</sub> at reference wavelength"
        }
        {
          name          = y
          description   = "NFIRAOS visible NGS target y position"
          type          = double
          units         = "mm in XY plane of FCRS<sub>174.5</sub> at reference wavelength"
        }
        {
          name          = pointingstate
          description   = """Current state of the event stream

*Discussion: SLEWING and TRACKING are the two normal values expected during science observations. INPOSITION is a state only expected during the day when the telescope points at a fixed Az, El.*
          """
          enum          = [SLEWING,TRACKING,INPOSITION]
        }      
        {
          name          = trackID
          description   = "Unique TCS target ID that is incremented (with rollover) each time the TCS is instructed to move to a new target."
          type          = long
        }
        {
          name          = timestamp
          description   = "Timestamp for the data"
          type          = double
          units         = MJD
        }
      ]
    }

  ]
}
